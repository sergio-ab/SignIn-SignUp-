<!DOCTYPE html>

<!-- ---------------------------------------------------------
    |   Autor: Clara Montaño Rodríguez
    |   Última modificación: 29/01/2026
-----------------------------------------------------------
    |   VISTA (HTML)
    |   Contiene:
    |       - Estructura de la interfaz de usuario
    |       - Marcado semántico
    |       - Elementos interactivos (botones, formularios)
    |       - Contenedores dinámicos para datos del servidor
    |   NO contiene:
    |       - Lógica de negocio
    |       - Acceso a datos
    |       - Código JavaScript
-----------------------------------------------------------
    |   FLUJO DE ESTA PÁGINA
    |   Sign in -> sessionStorage (userId, name, role)
    |   -> Accounts page -> Controller -> Model (fetch REST)
-----------------------------------------------------------
    |   VISTA (HTML) - ACCESIBLE (WCAG 2.1 Nivel A)
    |   - Navegación semántica
    |   - Botones y formularios accesibles
    |   - Tabla con roles ARIA
--------------------------------------------------------- -->

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>My Accounts</title>

    <!-- FONT -->
    <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;500;600;700&display=swap"
          rel="stylesheet">

    <!-- FONT AWESOME -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/styleCRUD.css">

    <!-- CONTROLLER -->
    <script type="module" src="assets/js/accountsController.js"></script>
</head>

<body>

<main class="main-container">

    <!-- HEADER -->
    <header class="top-bar">
        <h1>My Account</h1>

        <nav
            role="navigation"
            aria-label="Navegación principal">

            <div class="top-actions">

                <button
                    class="btn btn--primary"
                    id="btnCreateAccount"
                    role="button">
                    Create Account
                </button>

                <button
                    class="btn btn--outline"
                    id="btnHelp"
                    role="button">
                    Help
                </button>

                <button
                    class="btn btn--outline"
                    id="btnLogout"
                    role="button"
                    aria-label="Cerrar sesión">
                    Logout
                </button>

            </div>
        </nav>
    </header>

    <!-- WELCOME -->
    <section
        class="welcome-box"
        aria-labelledby="welcomeTitle">

        <div>
            <h2 id="welcomeTitle">
                Bienvenido,
                <span class="user-name" id="userName"></span>
            </h2>
            <p>Consulta y gestiona tus cuentas de forma segura.</p>
        </div>

        <div class="welcome-stats">
            <div>
                <strong id="totalAccounts">0</strong>
                <span>Cuentas</span>
            </div>
            <div>
                <strong id="totalBalance">€0,00</strong>
                <span>Balance total</span>
            </div>
        </div>
    </section>

    <!-- TÍTULO TABLA -->
    <h2 class="section-title" id="accountsTitle">Accounts</h2>

    <!-- TABLA -->
    <section
        class="table"
        role="table"
        aria-labelledby="accountsTitle">

        <!-- THEAD -->
        <div class="table-header" role="row">
            <div role="columnheader">ID</div>
            <div role="columnheader">Description</div>
            <div role="columnheader">Type</div>
            <div role="columnheader" class="text-right">Balance</div>
            <div role="columnheader" class="text-right">Begin Balance</div>
            <div role="columnheader" class="text-right">Credit Line</div>
            <div role="columnheader">Actions</div>
        </div>

        <!-- TBODY -->
        <div
            id="accountsContainer"
            class="table-body"
            role="rowgroup">
        </div>

    </section>

</main>

<!-- MODAL CREATE / EDIT -->
<div
    id="accountModal"
    class="modal-overlay"
    role="dialog"
    aria-modal="true"
    aria-labelledby="modalTitle"
    style="display: none;">

    <div class="modal">
        <h2 id="modalTitle">Create Account</h2>

        <form id="accountForm">

            <input type="hidden" id="accountId">

            <label for="description">Description</label>
            <input type="text" id="description" maxlength="50" required>

            <label for="type">Type</label>
            <select id="type" required>
                <option value="STANDARD">STANDARD</option>
                <option value="CREDIT">CREDIT</option>
            </select>

            <label for="beginBalance">Begin Balance</label>
            <input type="number" id="beginBalance" min="0" step="0.01" required>

            <label for="creditLine">Credit Line</label>
            <input type="number" id="creditLine" min="0" step="0.01" value="0">

            <div class="modal-actions">
                <button type="submit" class="btn btn--primary">Save</button>
                <button type="button" class="btn btn--outline" id="btnCancel">
                    Cancel
                </button>
            </div>

        </form>
    </div>
</div>

<!-- MODAL MENSAJES -->
<div
    id="messageOverlay"
    class="modal-overlay"
    role="alertdialog"
    aria-labelledby="messageTitle"
    aria-describedby="messageText"
    style="display: none;">

    <div class="modal">
        <h2 id="messageTitle">Mensaje</h2>
        <p id="messageText"></p>

        <div class="modal-actions">
            <button id="btnConfirm" class="btn btn--primary" style="display: none;">
                Confirmar
            </button>
            <button id="btnCloseMessage" class="btn btn--outline">
                Cerrar
            </button>
        </div>
    </div>
</div>

</body>
</html>
